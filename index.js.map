{"version":3,"file":"index.js","sources":["../src/img/error.png","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/hello.png","../src/img/caution.png","../src/main.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAH0SURBVHgB1ZpRbsIwDIYdtIpXrrSTbDcYO8HKDXajHWFHGW+UpCLD2oxaCBA7dhs+adJU0fT/SEnsggMB3vs3ANce/12BEs5B2zTNBpgsgEkI4eN4uU9QDI/ECO3f2Dwc58V4AbwQGCKdibtgeO9DHPx9xxiLZwHHwLGGY0tm4iZW4QlTCevwhInEVOEJVYmpwxMqEnOFJ4ok5g5PiCRqCU+wJGoLT2RJ1BqeuCkhDb/b+de+71+gkNxxUhJd161BGp69OiQYvnlCiZ9RNdo0T8/OuS0wkFaRksIQs2HGwaHVaAaAwX4fWtE6DZe3LY4FDEaZpQJSidLwqgJcCY3w6gK5ElrhTQTuSWiGNxO4JqEd3lQAEhLa4RFTASQloRUeGY7LfqySw2IBMeeYCtozkKitWPtEDma3UOoDW7JjTypwa7XRllAXyFkqNSVUBTjrvJaEmoBkk9KQUBEo2WFLJa4K5PbBw46MG/6aRG57+t+VjTayUwcWQv/FbeaPXdVmuWxaYILn4LmcczAbZhwd7Dq/PttwHqapP818onap/rHKxW1bq0RWeKI2CVZ4ohYJUXhibomi8MRcEirhiaklVMMTU0mYhCesJUzDE1YSpeFZPzXAgZ0D3W/Rz+DWViwBxFJCUhiyH6tIqsgMtodDfJdUtb/jJi40Hp51BAAAAABJRU5ErkJggg==\"","import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport iconError from '../img/error.png';\n\nconst formInput = document.querySelector('.form-input');\nconst perPage = 15;\n\nexport default async function axiosGet(inputValue, page) {\n    try {\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: '49360520-b72380be0a18495ea370d4b42',\n                q: inputValue,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: 'true',\n                page: page,\n                per_page: perPage,\n            },\n        });\n        if (response.data.hits.length === 0) {\n            iziToast.show({\n                message:\n                    'Sorry, there are no images matching your search query. Please try again!',\n                backgroundColor: '#ef4040',\n                messageColor: 'white',\n                position: 'topRight',\n                transitionIn: 'fadeIn',\n                iconUrl: iconError,\n                maxWidth: '432px',\n            });\n            return { totalPages: 0, hits: [] };\n        }\n\n        const totalHits = parseInt(response.data.totalHits);\n        const totalPages = Math.ceil(totalHits / perPage);\n\n        return {\n            totalPages: totalPages,\n            hits: response.data.hits,\n        };\n    } catch (error) {\n        iziToast.show({\n            message: `An unexpected error occurred: ${error.message || error}`,\n            backgroundColor: '#ef4040',\n            messageColor: 'white',\n            position: 'topRight',\n            transitionIn: 'fadeIn',\n            iconUrl: iconError,\n        });\n        return { totalPages: 0, hits: [] };\n    }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\n\nexport const lightbox = new SimpleLightbox('.gallery-link', {\n    captionsData: 'alt',\n});\n\nexport default function renderImages(images) {\n    if (images === undefined || images.length === 0) {\n        return;\n    } else {\n        const markup = images\n            .map(image => {\n                return `\n                <li class=\"gallery-item\">\n                    <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                        <img           \n                            class=\"gallery-image\"\n                            src=\"${image.webformatURL}\"\n                            alt=\"${image.tags}\"                   \n                        />\n                    </a>\n                    <div class=\"card\">\n                        <div class=\"card-item\">\n                            <h3 class=\"card-name\">Likes</h3>\n                            <p class=\"card-number\">${image.likes}</p>\n                        </div>\n                        <div class=\"card-item\">\n                            <h3 class=\"card-name\">Views</h3>\n                            <p class=\"card-number\">${image.views}</p>\n                        </div>\n                        <div class=\"card-item\">\n                            <h3 class=\"card-name\">Comments</h3>\n                            <p class=\"card-number\">${image.comments}</p>\n                        </div>\n                        <div class=\"card-item\">\n                            <h3 class=\"card-name\">Downloads</h3>\n                            <p class=\"card-number\">${image.downloads}</p>\n                        </div>\n                    </div>\n                </li>\n            `;\n            })\n            .join('');\n        gallery.insertAdjacentHTML('beforeend', markup);\n        lightbox.refresh();\n    }\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAI5SURBVHgB7ZmBUcMwDEU/TNARwgSFCcgI3QA2gA2SDSgTdAWYoGWCwgQNE7RMIOxLDhTHie1WdtK7vrvc+S6yJVmKY8tAJIioUM++eV5wTmiDqUuJc6GZdZM9powycKaeXD1L6ke/W2BKNIYXPbPex67pk2FMlAFPDsO1oVvH+weMAdk/VO1MSXUqzZgsT6+dpV/aVUopXFlmMg/o/2hxZIUUWGZ+yWc7YJwZdT/4uJFoZo5T4kSalOM8IwZq4MwI+xJCGJHYHxNRHyWFkfNiSpp02klG1qaEKxBf+qhepeJEQQ224LOPSFD7n5L79LmGHzlrvyMer6ztteXwdWDO2m+Ix4a17yGFEVr5FeJfT8a/A58+Vz5CerS/DgpEJFSXbwpNFqcDRsocEJ9Dj24rPhEYzQFDtxUfBzLWrhAfcQf4ID+IT8Xaty7hKUbgm7XPMoUq1p67hH0c4IN8Ij4Va2c4FeMv7MxJAX3Bf+OhwWZig4Xp9d66uFKIz3iK9LHpGtzUuRzIWfsL6eC67oYEXQ5w79dIh3cEBqE2GRJhfnt0zBbeOEZukRhqlyTzPrmhFOJHug+khx9dw4oITQiTrv8WG46vUlC7AhetCuFhx5rZUdpkrno6aqMzTAu9zb5Rp8zWmaTzDSjjC0zPeI1OoWJQgtrlw6lS4MIFOcSKVDo5Q+SlCmSSha1NgKzY1lzSgZDthtjtjhjUvWXpY7Q/uxPq3qN1jKexb+d9oHovxbfDa6pvI8VL878gIll2sxgwlgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAI7SURBVHgB7VnRcYMwDFU7ASMwQkZgg3aDdoOyQdigdIJkg2SDjNAR3A0Y4RUac1GEDbZxwdzl3Tkf9ZMj23qW1BA98EB6AJC149iORo9DO3LaClpnFYb4pi2gdfQddpSUMrowEadf6dGjC6eMUoWO+x5K/y0Tm/qkFKFPn+ONzRVirqDU0ImUOXgwzF/Y/IVSgkG4uYFjvaFVYYjxeoTLBa2SEHTrxF44lY9wu802jF/RmggJCxFuDdbM0DA8m452F6wtaEwIV4dWXwvtxdz6zyruhXsQc6ZyohScmt8elhQ0JoQrQqTHWXDWETSG9U5p4BynNqB5JZtfRtBwEK4Ijx61hTuawWM7L5/NVwuvNGygtHCXEzRGhCt4JhG/jPBPjPc/zyoc6h3GLQwbKEb43c02U7c1x/lBo+LAl9hN2FSMG7fxgWfGxfWJlMgcbBTjx2l8EFgG4z4kGkebwufWnID7pHTysFPMzvk/EohZJ8FDuLEcgeNT7bqYYgvVnrZcN2dP2/mNDzwaFYv9Tts1vrGMuXUSEuhfMafxQWCjEhtBOupEI04/p5WAkDoJjvWOwzp73Dqy4KQE0fhMkT84OfT0O4cxREUBgKug4dCoeHxpY9iAUza2rCcbn8xEiibc2BvQa9obH8TMfjRIRD28EqFhTbugEUm44gtr3ERcUQTA1PhgRr2zNGBqfERsVZQ4RHgqEqef7s8/GhB6fcL1xclpm/h5bj++aLuo/j61kBW2A4XUf7J9YCv4BY5CiS+DlKsPAAAAAElFTkSuQmCC\"","import axiosGet from './js/pixabay-api';\nimport renderImages from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport iconError from './img/error.png';\nimport hello from './img/hello.png';\nimport caution from './img/caution.png';\n\nconst formInput = document.querySelector('.form-input');\nconst formBtn = document.querySelector('.form-btn');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst galleryBtn = document.querySelector('.gallery-btn');\n\nlet page = 1;\nlet inputValue = '';\n\ngalleryBtn.addEventListener('click', nextBtn);\n\nformBtn.addEventListener('click', async e => {\n    e.preventDefault();\n    gallery.innerHTML = '';\n    page = 1;\n    inputValue = formInput.value.trim();\n    galleryBtn.classList.add('hidden');\n    if (!inputValue) {\n        iziToast.show({\n            message: 'Please enter a search query!',\n            backgroundColor: '#ffa000',\n            messageColor: 'white',\n            position: 'topRight',\n            transitionIn: 'fadeIn',\n            maxWidth: '432px',\n            iconUrl: caution,\n        });\n        return;\n    }\n\n    loader.classList.remove('hidden');\n\n    try {\n        const response = await axiosGet(inputValue, page);\n        if (response.totalPages === 0) {\n            return;\n        }\n        if (response.totalPages > page) {\n            renderImages(response.hits);\n            galleryBtn.classList.remove('hidden');\n        }\n    } catch (error) {\n        iziToast.show({\n            message: `An unexpected error occurred: ${error.message || error}`,\n            backgroundColor: '#ef4040',\n            messageColor: 'white',\n            position: 'topRight',\n            transitionIn: 'fadeIn',\n            iconUrl: iconError,\n        });\n    } finally {\n        loader.classList.add('hidden');\n    }\n});\n\nasync function nextBtn() {\n    if (inputValue === '') {\n        iziToast.show({\n            message: `An unexpected error occurred: ${error.message || error}`,\n            backgroundColor: '#ef4040',\n            messageColor: 'white',\n            position: 'topRight',\n            transitionIn: 'fadeIn',\n            iconUrl: iconError,\n        });\n        return;\n    }\n    loader.classList.remove('hidden');\n    window.scrollBy({\n        top: 100,\n        behavior: 'smooth',\n    });\n    galleryBtn.classList.add('hidden');\n    page += 1;\n    const nextPageResponse = await axiosGet(inputValue, page);\n    renderImages(nextPageResponse.hits);\n    loader.classList.add('hidden');\n    galleryBtn.classList.remove('hidden');\n    scroll();\n    if (page >= nextPageResponse.totalPages) {\n        galleryBtn.classList.add('hidden');\n        iziToast.show({\n            message:\n                \"We're sorry, but you've reached the end of search results.\",\n            backgroundColor: '#09f',\n            messageColor: 'white',\n            position: 'topRight',\n            transitionIn: 'fadeIn',\n            iconUrl: hello,\n        });\n    }\n}\n\nfunction scroll() {\n    const galleryItem = document.querySelector('.gallery-item');\n    const galleryItemRect = galleryItem.getBoundingClientRect();\n    window.scrollBy({\n        top: 2 * galleryItemRect.height,\n        behavior: 'smooth',\n    });\n}\n"],"names":["iconError","perPage","axiosGet","inputValue","page","response","axios","iziToast","totalHits","error","gallery","lightbox","SimpleLightbox","renderImages","images","markup","image","hello","caution","formInput","formBtn","loader","galleryBtn","nextBtn","e","nextPageResponse","scroll","galleryItemRect"],"mappings":"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"}